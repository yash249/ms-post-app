{"ast":null,"code":"import _objectSpread from\"C:/Yash/social-media-photo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/Yash/social-media-photo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Yash/social-media-photo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Yash/social-media-photo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Yash/social-media-photo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Card from'../../Components/Card/Card';import{connect}from'react-redux';import{searchedPosts as _searchedPosts}from'../../Redux/actions';import'./PostsPage.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PostsPage=/*#__PURE__*/function(_Component){_inherits(PostsPage,_Component);var _super=_createSuper(PostsPage);function PostsPage(props){var _this;_classCallCheck(this,PostsPage);_this=_super.call(this,props);_this.onLikeClicked=function(id){var newData=_this.props.picsData.map(function(item){if(id===item.id&&item.liked!==true){var currentItem=item;currentItem.likes=item.likes+1;currentItem.liked=true;return currentItem;}if(id===item.id&&item.liked===true){var _currentItem=item;_currentItem.likes=item.likes-1;_currentItem.liked=false;return _currentItem;}else{return item;}});_this.setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{picsData:newData});});};_this.onCommentChange=function(event,id){_this.setState({newComment:event.target.value});};_this.onPostClicked=function(id,comment){var newData=_this.props.picsData.map(function(item){if(id===item.id){var currentItem=item;item.comments.push(comment);currentItem=item;return currentItem;}else{return item;}});if(_this.props.picsData!==newData){_this.setState({picsData:newData});}};_this.filterByMostLiked=function(){var sortedByLikes=_this.props.picsData.sort(function(a,b){return a.likes-b.likes;}).reverse();_this.setState({picsData:sortedByLikes},function(){console.log(\"sortedByLikes\");});};_this.filterByMostCommented=function(){var sortedByLikes=_this.props.picsData.sort(function(a,b){return a.comments.length-b.comments.length;}).reverse();_this.setState({picsData:sortedByLikes},function(){console.log(\"sortedByLikes\");});};_this.onSearchTermEntered=function(event){console.log(event);var results=_this.props.picsData.filter(function(item){return item.category.toLowerCase().includes(event.target.value);});_this.props.searchedPosts(results);};_this.onImageClick=function(url){_this.setState({imageClickedUrl:url});};_this.onDeleteClick=function(CardId,CommentKey){console.log(CardId,CommentKey);var newData=_this.props.picsData.map(function(item){if(CardId===item.id){var currentItem=item;item.comments.splice(CommentKey,1);currentItem=item;return currentItem;}else{return item;}});if(_this.props.picsData!==newData){_this.setState({picsData:newData});}};_this.state={picsData:[],imageClickedUrl:null,outsideImageClicked:false};return _this;}_createClass(PostsPage,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{display:this.state.imageClickedUrl?\"block\":\"none\"},id:\"overlay\",onClick:function onClick(){_this2.setState({imageClickedUrl:null});},children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"overlayImageStyle\",src:this.state.imageClickedUrl,onClick:\"disabled click\",alt:\"Avatar\",style:{width:\"500px\"}})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"filter\",onClick:this.filterByMostLiked,children:\"Most Liked\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter\",children:\"|\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter\",onClick:this.filterByMostCommented,children:\"Most Commented\"}),/*#__PURE__*/_jsx(\"input\",{style:{marginLeft:\"15%\"},type:\"search\",onChange:this.onSearchTermEntered,placeholder:\"Search Images\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Cards\",children:this.props.picsData.map(function(item){return/*#__PURE__*/_jsx(Card,_objectSpread({onDeleteClick:_this2.onDeleteClick,onImageClick:_this2.onImageClick,onPostClicked:_this2.onPostClicked,onCommentChange:_this2.onCommentChange,onLikeClicked:_this2.onLikeClicked},item));})})]})]});}}]);return PostsPage;}(Component);var mapStateToProps=function mapStateToProps(state){return{picsData:state};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{searchedPosts:function searchedPosts(data){return dispatch(_searchedPosts(data));}};};export default connect(mapStateToProps,mapDispatchToProps)(PostsPage);","map":{"version":3,"sources":["C:/Yash/social-media-photo-app/src/Containers/PostsPage/PostsPage.js"],"names":["React","Component","Card","connect","searchedPosts","PostsPage","props","onLikeClicked","id","newData","picsData","map","item","liked","currentItem","likes","setState","prevState","onCommentChange","event","newComment","target","value","onPostClicked","comment","comments","push","filterByMostLiked","sortedByLikes","sort","a","b","reverse","console","log","filterByMostCommented","length","onSearchTermEntered","results","filter","category","toLowerCase","includes","onImageClick","url","imageClickedUrl","onDeleteClick","CardId","CommentKey","splice","state","outsideImageClicked","display","width","marginLeft","mapStateToProps","mapDispatchToProps","dispatch","data"],"mappings":"wtBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,IAAP,KAAiB,4BAAjB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,aAAa,GAAbA,CAAAA,cAAT,KAA8B,qBAA9B,CACA,MAAO,iBAAP,C,gJAEMC,CAAAA,S,sGACF,mBAAYC,KAAZ,CAAmB,2CACf,uBAAMA,KAAN,EADe,MASnBC,aATmB,CASH,SAACC,EAAD,CAAQ,CACpB,GAAIC,CAAAA,OAAO,CAAG,MAAKH,KAAL,CAAWI,QAAX,CAAoBC,GAApB,CAAwB,SAAAC,IAAI,CAAI,CAC1C,GAAIJ,EAAE,GAAKI,IAAI,CAACJ,EAAZ,EAAkBI,IAAI,CAACC,KAAL,GAAe,IAArC,CAA2C,CACvC,GAAIC,CAAAA,WAAW,CAAGF,IAAlB,CACAE,WAAW,CAACC,KAAZ,CAAoBH,IAAI,CAACG,KAAL,CAAa,CAAjC,CACAD,WAAW,CAACD,KAAZ,CAAoB,IAApB,CACA,MAAOC,CAAAA,WAAP,CACH,CACD,GAAIN,EAAE,GAAKI,IAAI,CAACJ,EAAZ,EAAkBI,IAAI,CAACC,KAAL,GAAe,IAArC,CAA2C,CACvC,GAAIC,CAAAA,YAAW,CAAGF,IAAlB,CACAE,YAAW,CAACC,KAAZ,CAAoBH,IAAI,CAACG,KAAL,CAAa,CAAjC,CACAD,YAAW,CAACD,KAAZ,CAAoB,KAApB,CACA,MAAOC,CAAAA,YAAP,CACH,CALD,IAMK,CACD,MAAOF,CAAAA,IAAP,CACH,CACJ,CAhBa,CAAd,CAkBA,MAAKI,QAAL,CAAc,SAAAC,SAAS,CAAI,CACvB,sCACOA,SADP,MAEIP,QAAQ,CAAED,OAFd,GAIH,CALD,EAMH,CAlCkB,OAoCnBS,eApCmB,CAoCD,SAACC,KAAD,CAAQX,EAAR,CAAe,CAC7B,MAAKQ,QAAL,CAAc,CAAEI,UAAU,CAAED,KAAK,CAACE,MAAN,CAAaC,KAA3B,CAAd,EACH,CAtCkB,OAwCnBC,aAxCmB,CAwCH,SAACf,EAAD,CAAKgB,OAAL,CAAiB,CAC7B,GAAIf,CAAAA,OAAO,CAAG,MAAKH,KAAL,CAAWI,QAAX,CAAoBC,GAApB,CAAwB,SAAAC,IAAI,CAAI,CAC1C,GAAIJ,EAAE,GAAKI,IAAI,CAACJ,EAAhB,CAAoB,CAChB,GAAIM,CAAAA,WAAW,CAAGF,IAAlB,CACAA,IAAI,CAACa,QAAL,CAAcC,IAAd,CAAmBF,OAAnB,EACAV,WAAW,CAAGF,IAAd,CACA,MAAOE,CAAAA,WAAP,CACH,CALD,IAMK,CACD,MAAOF,CAAAA,IAAP,CACH,CACJ,CAVa,CAAd,CAWA,GAAI,MAAKN,KAAL,CAAWI,QAAX,GAAwBD,OAA5B,CAAqC,CACjC,MAAKO,QAAL,CAAc,CAAEN,QAAQ,CAAED,OAAZ,CAAd,EACH,CACJ,CAvDkB,OAyDnBkB,iBAzDmB,CAyDC,UAAM,CACtB,GAAIC,CAAAA,aAAa,CAAG,MAAKtB,KAAL,CAAWI,QAAX,CAAoBmB,IAApB,CAAyB,SAAUC,CAAV,CAAaC,CAAb,CAAgB,CACzD,MAAOD,CAAAA,CAAC,CAACf,KAAF,CAAUgB,CAAC,CAAChB,KAAnB,CACH,CAFmB,EAEjBiB,OAFiB,EAApB,CAIA,MAAKhB,QAAL,CAAc,CAAEN,QAAQ,CAAEkB,aAAZ,CAAd,CAA2C,UAAM,CAAEK,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA8B,CAAjF,EACH,CA/DkB,OAiEnBC,qBAjEmB,CAiEK,UAAM,CAC1B,GAAIP,CAAAA,aAAa,CAAG,MAAKtB,KAAL,CAAWI,QAAX,CAAoBmB,IAApB,CAAyB,SAAUC,CAAV,CAAaC,CAAb,CAAgB,CACzD,MAAOD,CAAAA,CAAC,CAACL,QAAF,CAAWW,MAAX,CAAoBL,CAAC,CAACN,QAAF,CAAWW,MAAtC,CACH,CAFmB,EAEjBJ,OAFiB,EAApB,CAIA,MAAKhB,QAAL,CAAc,CAAEN,QAAQ,CAAEkB,aAAZ,CAAd,CAA2C,UAAM,CAAEK,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA8B,CAAjF,EACH,CAvEkB,OAyEnBG,mBAzEmB,CAyEG,SAAClB,KAAD,CAAW,CAC7Bc,OAAO,CAACC,GAAR,CAAYf,KAAZ,EACA,GAAMmB,CAAAA,OAAO,CAAG,MAAKhC,KAAL,CAAWI,QAAX,CAAoB6B,MAApB,CAA2B,SAAA3B,IAAI,QAC3CA,CAAAA,IAAI,CAAC4B,QAAL,CAAcC,WAAd,GAA4BC,QAA5B,CAAqCvB,KAAK,CAACE,MAAN,CAAaC,KAAlD,CAD2C,EAA/B,CAAhB,CAIA,MAAKhB,KAAL,CAAWF,aAAX,CAAyBkC,OAAzB,EAEH,CAjFkB,OAmFnBK,YAnFmB,CAmFJ,SAACC,GAAD,CAAS,CACpB,MAAK5B,QAAL,CAAc,CAAE6B,eAAe,CAAED,GAAnB,CAAd,EACH,CArFkB,OAuFnBE,aAvFmB,CAuFH,SAACC,MAAD,CAASC,UAAT,CAAwB,CACpCf,OAAO,CAACC,GAAR,CAAYa,MAAZ,CAAoBC,UAApB,EAEA,GAAIvC,CAAAA,OAAO,CAAG,MAAKH,KAAL,CAAWI,QAAX,CAAoBC,GAApB,CAAwB,SAAAC,IAAI,CAAI,CAC1C,GAAImC,MAAM,GAAKnC,IAAI,CAACJ,EAApB,CAAwB,CACpB,GAAIM,CAAAA,WAAW,CAAGF,IAAlB,CACAA,IAAI,CAACa,QAAL,CAAcwB,MAAd,CAAqBD,UAArB,CAAiC,CAAjC,EACAlC,WAAW,CAAGF,IAAd,CACA,MAAOE,CAAAA,WAAP,CACH,CALD,IAMK,CACD,MAAOF,CAAAA,IAAP,CACH,CACJ,CAVa,CAAd,CAYA,GAAI,MAAKN,KAAL,CAAWI,QAAX,GAAwBD,OAA5B,CAAqC,CACjC,MAAKO,QAAL,CAAc,CAAEN,QAAQ,CAAED,OAAZ,CAAd,EACH,CACJ,CAzGkB,CAEf,MAAKyC,KAAL,CAAa,CACTxC,QAAQ,CAAE,EADD,CAETmC,eAAe,CAAE,IAFR,CAGTM,mBAAmB,CAAE,KAHZ,CAAb,CAFe,aAOlB,C,4CAoGD,iBAAS,iBACL,mBACI,wCACI,YAAK,KAAK,CAAE,CAAEC,OAAO,CAAE,KAAKF,KAAL,CAAWL,eAAX,CAA6B,OAA7B,CAAuC,MAAlD,CAAZ,CAAwE,EAAE,CAAC,SAA3E,CAAqF,OAAO,CAAE,kBAAM,CAAE,MAAI,CAAC7B,QAAL,CAAc,CAAE6B,eAAe,CAAE,IAAnB,CAAd,EAA0C,CAAhJ,uBACI,kCACI,YAAK,SAAS,CAAC,mBAAf,CAAmC,GAAG,CAAE,KAAKK,KAAL,CAAWL,eAAnD,CAAoE,OAAO,CAAC,gBAA5E,CAA6F,GAAG,CAAC,QAAjG,CAA0G,KAAK,CAAE,CAAEQ,KAAK,CAAE,OAAT,CAAjH,EADJ,EADJ,EADJ,cAMI,oCACI,aAAK,SAAS,CAAC,QAAf,wBACI,YAAK,SAAS,CAAC,QAAf,CAAwB,OAAO,CAAE,KAAK1B,iBAAtC,wBADJ,cAEI,YAAK,SAAS,CAAC,QAAf,eAFJ,cAGI,YAAK,SAAS,CAAC,QAAf,CAAwB,OAAO,CAAE,KAAKQ,qBAAtC,4BAHJ,cAII,cAAO,KAAK,CAAE,CAAEmB,UAAU,CAAE,KAAd,CAAd,CAAqC,IAAI,CAAC,QAA1C,CAAmD,QAAQ,CAAE,KAAKjB,mBAAlE,CAAuF,WAAW,CAAC,eAAnG,EAJJ,GADJ,cAOI,YAAK,SAAS,CAAC,OAAf,UACK,KAAK/B,KAAL,CAAWI,QAAX,CAAoBC,GAApB,CAAwB,SAAAC,IAAI,qBAAI,KAAC,IAAD,gBAAM,aAAa,CAAE,MAAI,CAACkC,aAA1B,CAAyC,YAAY,CAAE,MAAI,CAACH,YAA5D,CAA0E,aAAa,CAAE,MAAI,CAACpB,aAA9F,CAA6G,eAAe,CAAE,MAAI,CAACL,eAAnI,CAAoJ,aAAa,CAAE,MAAI,CAACX,aAAxK,EAA2LK,IAA3L,EAAJ,EAA5B,CADL,EAPJ,GANJ,GADJ,CAoBH,C,uBAjImBX,S,EAoIxB,GAAMsD,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAL,KAAK,QAAK,CAC9BxC,QAAQ,CAAEwC,KADoB,CAAL,EAA7B,CAIA,GAAMM,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACnC,MAAO,CACHrD,aAAa,CAAE,uBAACsD,IAAD,QAAUD,CAAAA,QAAQ,CAACrD,cAAa,CAACsD,IAAD,CAAd,CAAlB,EADZ,CAAP,CAGH,CAJD,CAKA,cAAevD,CAAAA,OAAO,CAACoD,eAAD,CAAkBC,kBAAlB,CAAP,CAA6CnD,SAA7C,CAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport Card from '../../Components/Card/Card'\r\nimport { connect } from 'react-redux'\r\nimport { searchedPosts } from '../../Redux/actions'\r\nimport './PostsPage.css'\r\n\r\nclass PostsPage extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            picsData: [],\r\n            imageClickedUrl: null,\r\n            outsideImageClicked: false\r\n        }\r\n    }\r\n\r\n    onLikeClicked = (id) => {\r\n        let newData = this.props.picsData.map(item => {\r\n            if (id === item.id && item.liked !== true) {\r\n                let currentItem = item\r\n                currentItem.likes = item.likes + 1\r\n                currentItem.liked = true\r\n                return currentItem\r\n            }\r\n            if (id === item.id && item.liked === true) {\r\n                let currentItem = item\r\n                currentItem.likes = item.likes - 1\r\n                currentItem.liked = false\r\n                return currentItem\r\n            }\r\n            else {\r\n                return item;\r\n            }\r\n        })\r\n\r\n        this.setState(prevState => {\r\n            return {\r\n                ...prevState,\r\n                picsData: newData\r\n            }\r\n        })\r\n    }\r\n\r\n    onCommentChange = (event, id) => {\r\n        this.setState({ newComment: event.target.value })\r\n    }\r\n\r\n    onPostClicked = (id, comment) => {\r\n        let newData = this.props.picsData.map(item => {\r\n            if (id === item.id) {\r\n                let currentItem = item\r\n                item.comments.push(comment)\r\n                currentItem = item\r\n                return currentItem\r\n            }\r\n            else {\r\n                return item;\r\n            }\r\n        })\r\n        if (this.props.picsData !== newData) {\r\n            this.setState({ picsData: newData })\r\n        }\r\n    }\r\n\r\n    filterByMostLiked = () => {\r\n        let sortedByLikes = this.props.picsData.sort(function (a, b) {\r\n            return a.likes - b.likes;\r\n        }).reverse();\r\n\r\n        this.setState({ picsData: sortedByLikes }, () => { console.log(\"sortedByLikes\") })\r\n    }\r\n\r\n    filterByMostCommented = () => {\r\n        let sortedByLikes = this.props.picsData.sort(function (a, b) {\r\n            return a.comments.length - b.comments.length;\r\n        }).reverse();\r\n\r\n        this.setState({ picsData: sortedByLikes }, () => { console.log(\"sortedByLikes\") })\r\n    }\r\n\r\n    onSearchTermEntered = (event) => {\r\n        console.log(event)\r\n        const results = this.props.picsData.filter(item =>\r\n            item.category.toLowerCase().includes(event.target.value)\r\n        );\r\n\r\n        this.props.searchedPosts(results)\r\n\r\n    }\r\n\r\n    onImageClick = (url) => {\r\n        this.setState({ imageClickedUrl: url })\r\n    }\r\n\r\n    onDeleteClick = (CardId, CommentKey) => {\r\n        console.log(CardId, CommentKey)\r\n\r\n        let newData = this.props.picsData.map(item => {\r\n            if (CardId === item.id) {\r\n                let currentItem = item\r\n                item.comments.splice(CommentKey, 1);\r\n                currentItem = item\r\n                return currentItem\r\n            }\r\n            else {\r\n                return item;\r\n            }\r\n        })\r\n\r\n        if (this.props.picsData !== newData) {\r\n            this.setState({ picsData: newData })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div style={{ display: this.state.imageClickedUrl ? \"block\" : \"none\" }} id=\"overlay\" onClick={() => { this.setState({ imageClickedUrl: null }) }}>\r\n                    <div>\r\n                        <img className=\"overlayImageStyle\" src={this.state.imageClickedUrl} onClick='disabled click' alt=\"Avatar\" style={{ width: \"500px\" }}></img>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <div className=\"Header\">\r\n                        <div className=\"filter\" onClick={this.filterByMostLiked}>Most Liked</div>\r\n                        <div className=\"filter\">|</div>\r\n                        <div className=\"filter\" onClick={this.filterByMostCommented}>Most Commented</div>\r\n                        <input style={{ marginLeft: \"15%\" }} type=\"search\" onChange={this.onSearchTermEntered} placeholder=\"Search Images\"></input>\r\n                    </div>\r\n                    <div className=\"Cards\">\r\n                        {this.props.picsData.map(item => <Card onDeleteClick={this.onDeleteClick} onImageClick={this.onImageClick} onPostClicked={this.onPostClicked} onCommentChange={this.onCommentChange} onLikeClicked={this.onLikeClicked} {...item} />)}\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    picsData: state,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        searchedPosts: (data) => dispatch(searchedPosts(data))\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PostsPage);"]},"metadata":{},"sourceType":"module"}